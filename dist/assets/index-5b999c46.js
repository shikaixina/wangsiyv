import{c as e,t as a,n as t,m as l,a as i,w as s,b as o,I as n,i as r,B as c}from"./index-9049bcee.js";import{d as u,r as v,a as d,c as h,w as m,o as f,b as p,e as g,f as w,g as b,n as y,h as x,v as k,u as C,i as $,j as _,k as S,l as I,m as T,F as z,p as M,q as B,s as j,t as D,x as P,y as X,_ as q}from"./index-a2c9be68.js";import{u as O,a as Y,o as R,b as A,d as E,c as F,e as H,r as W,f as G}from"./on-popup-reopen-ff3749db.js";import{u as J,a as K,w as L,b as N,i as Q,p as U}from"./use-touch-2d4a93cc.js";const[V,Z]=e("swipe"),ee={loop:a,width:t,height:t,vertical:Boolean,autoplay:l(0),duration:l(500),touchable:a,lazyRender:Boolean,initialSwipe:l(0),indicatorColor:String,showIndicators:a,stopPropagation:a},ae=Symbol(V);const te=s(u({name:V,props:ee,emits:["change"],setup(e,{emit:a,slots:t}){const l=v(),s=v(),o=d({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),n=J(),{children:r,linkChildren:c}=O(ae),u=h((()=>r.length)),x=h((()=>o[e.vertical?"height":"width"])),k=h((()=>e.vertical?n.deltaY.value:n.deltaX.value)),C=h((()=>{if(o.rect){return(e.vertical?o.rect.height:o.rect.width)-x.value*u.value}return 0})),$=h((()=>Math.ceil(Math.abs(C.value)/x.value))),_=h((()=>u.value*x.value)),S=h((()=>(o.active+u.value)%u.value)),I=h((()=>{const a=e.vertical?"vertical":"horizontal";return n.direction.value===a})),T=h((()=>{const a={transitionDuration:`${o.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${o.offset}px)`};if(x.value){const t=e.vertical?"height":"width",l=e.vertical?"width":"height";a[t]=`${_.value}px`,a[l]=e[l]?`${e[l]}px`:""}return a})),z=(a,t=0)=>{let l=a*x.value;e.loop||(l=Math.min(l,-C.value));let s=t-l;return e.loop||(s=i(s,C.value,0)),s},M=({pace:t=0,offset:l=0,emitChange:s})=>{if(u.value<=1)return;const{active:n}=o,c=(a=>{const{active:t}=o;return a?e.loop?i(t+a,-1,u.value):i(t+a,0,$.value):t})(t),v=z(c,l);if(e.loop){if(r[0]&&v!==C.value){const e=v<C.value;r[0].setOffset(e?_.value:0)}if(r[u.value-1]&&0!==v){const e=v>0;r[u.value-1].setOffset(e?-_.value:0)}}o.active=c,o.offset=v,s&&c!==n&&a("change",S.value)},B=()=>{o.swiping=!0,o.active<=-1?M({pace:u.value}):o.active>=u.value&&M({pace:-u.value})},j=()=>{B(),n.reset(),E((()=>{o.swiping=!1,M({pace:1,emitChange:!0})}))};let D;const P=()=>clearTimeout(D),X=()=>{P(),e.autoplay>0&&u.value>1&&(D=setTimeout((()=>{j(),X()}),+e.autoplay))},q=(a=+e.initialSwipe)=>{if(!l.value)return;const t=()=>{var t,i;if(!Q(l)){const a={width:l.value.offsetWidth,height:l.value.offsetHeight};o.rect=a,o.width=+(null!=(t=e.width)?t:a.width),o.height=+(null!=(i=e.height)?i:a.height)}u.value&&(a=Math.min(u.value-1,a)),o.active=a,o.swiping=!0,o.offset=z(a),r.forEach((e=>{e.setOffset(0)})),X()};Q(l)?y().then(t):t()},F=()=>q(o.active);let H;const W=a=>{e.touchable&&(n.start(a),H=Date.now(),P(),B())},G=()=>{if(!e.touchable||!o.swiping)return;const a=Date.now()-H,t=k.value/a;if((Math.abs(t)>.25||Math.abs(k.value)>x.value/2)&&I.value){const a=e.vertical?n.offsetY.value:n.offsetX.value;let t=0;t=e.loop?a>0?k.value>0?-1:1:0:-Math[k.value>0?"ceil":"floor"](k.value/x.value),M({pace:t,emitChange:!0})}else k.value&&M({pace:0});o.swiping=!1,X()},V=(a,t)=>{const l=t===S.value,i=l?{backgroundColor:e.indicatorColor}:void 0;return b("i",{style:i,class:Z("indicator",{active:l})},null)};return K({prev:()=>{B(),n.reset(),E((()=>{o.swiping=!1,M({pace:-1,emitChange:!0})}))},next:j,state:o,resize:F,swipeTo:(a,t={})=>{B(),n.reset(),E((()=>{let l;l=e.loop&&a===u.value?0===o.active?0:a:a%u.value,t.immediate?E((()=>{o.swiping=!1})):o.swiping=!1,M({pace:l-o.active,emitChange:!0})}))}}),c({size:x,props:e,count:u,activeIndicator:S}),m((()=>e.initialSwipe),(e=>q(+e))),m(u,(()=>q(o.active))),m((()=>e.autoplay),X),m([L,N],F),m(Y(),(e=>{"visible"===e?X():P()})),f(q),p((()=>q(o.active))),R((()=>q(o.active))),g(P),w(P),A("touchmove",(a=>{if(e.touchable&&o.swiping&&(n.move(a),I.value)){!e.loop&&(0===o.active&&k.value>0||o.active===u.value-1&&k.value<0)||(U(a,e.stopPropagation),M({offset:k.value}))}}),{target:s}),()=>{var a;return b("div",{ref:l,class:Z()},[b("div",{ref:s,style:T.value,class:Z("track",{vertical:e.vertical}),onTouchstartPassive:W,onTouchend:G,onTouchcancel:G},[null==(a=t.default)?void 0:a.call(t)]),t.indicator?t.indicator({active:S.value,total:u.value}):e.showIndicators&&u.value>1?b("div",{class:Z("indicators",{vertical:e.vertical})},[Array(u.value).fill("").map(V)]):void 0])}}})),[le,ie]=e("swipe-item");const se=s(u({name:le,setup(e,{slots:a}){let t;const l=d({offset:0,inited:!1,mounted:!1}),{parent:i,index:s}=F(ae);if(!i)return;const o=h((()=>{const e={},{vertical:a}=i.props;return i.size.value&&(e[a?"height":"width"]=`${i.size.value}px`),l.offset&&(e.transform=`translate${a?"Y":"X"}(${l.offset}px)`),e})),n=h((()=>{const{loop:e,lazyRender:a}=i.props;if(!a||t)return!0;if(!l.mounted)return!1;const o=i.activeIndicator.value,n=i.count.value-1,r=0===o&&e?n:o-1,c=o===n&&e?0:o+1;return t=s.value===o||s.value===r||s.value===c,t}));return f((()=>{y((()=>{l.mounted=!0}))})),K({setOffset:e=>{l.offset=e}}),()=>{var e;return b("div",{class:ie(),style:o.value},[n.value?null==(e=a.default)?void 0:e.call(a):null])}}})),[oe,ne]=e("divider");const re=s(u({name:oe,props:{dashed:Boolean,hairline:a,contentPosition:o("center")},setup:(e,{slots:a})=>()=>{var t;return b("div",{role:"separator",class:ne({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!a.default})},[null==(t=a.default)?void 0:t.call(a)])}})),[ce,ue]=e("notice-bar");const ve=s(u({name:ce,props:{text:String,mode:String,color:String,delay:l(1),speed:l(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}},emits:["close","replay"],setup(e,{emit:a,slots:t}){let l,i=0,s=0;const o=v(),c=v(),u=d({show:!0,offset:0,duration:0}),h=t=>{"closeable"===e.mode&&(u.show=!1,a("close",t))},f=()=>{if(t["right-icon"])return t["right-icon"]();const a="closeable"===e.mode?"cross":"link"===e.mode?"arrow":void 0;return a?b(n,{name:a,class:ue("right-icon"),onClick:h},null):void 0},p=()=>{u.offset=i,u.duration=0,W((()=>{E((()=>{u.offset=-s,u.duration=(s+i)/+e.speed,a("replay")}))}))},g=()=>{const a=!1===e.scrollable&&!e.wrapable,l={transform:u.offset?`translateX(${u.offset}px)`:"",transitionDuration:`${u.duration}s`};return b("div",{ref:o,role:"marquee",class:ue("wrap")},[b("div",{ref:c,style:l,class:[ue("content"),{"van-ellipsis":a}],onTransitionend:p},[t.default?t.default():e.text])])},w=()=>{const{delay:a,speed:t,scrollable:n}=e,v=r(a)?1e3*+a:0;i=0,s=0,u.offset=0,u.duration=0,clearTimeout(l),l=setTimeout((()=>{if(!o.value||!c.value||!1===n)return;const e=G(o).width,a=G(c).width;(n||a>e)&&E((()=>{i=e,s=a,u.offset=-s,u.duration=s/+t}))}),v)};return R(w),H(w),A("pageshow",w),K({reset:w}),m((()=>[e.text,e.scrollable]),w),()=>{const{color:a,wrapable:l,background:i}=e;return x(b("div",{role:"alert",class:ue({wrapable:l}),style:{color:a,background:i}},[t["left-icon"]?t["left-icon"]():e.leftIcon?b(n,{class:ue("left-icon"),name:e.leftIcon},null):void 0,g(),f()]),[[k,u.show]])}}})),de=e=>(B("data-v-2c5296db"),e=e(),j(),e),he={class:"my-home-box"},me=["src"],fe={class:"home-new-album home-card"},pe={class:"card-title-box"},ge=de((()=>I("div",{class:"card-left"},"近期照片",-1))),we={class:"home-album-tabs"},be=["onClick"],ye=["src"],xe={class:"home-album-list"},ke={key:0},Ce=["src"],$e={key:1},_e={class:"home-new-dynamic home-card"},Se={class:"card-title-box"},Ie=de((()=>I("div",{class:"card-left"},"近期动态",-1))),Te={class:"home-dynamic-list"},ze={class:"list-item-left"},Me={key:0,class:"list-item-tag"},Be={class:"list-item-title"},je={class:"list-item-date"},De=q(u({__name:"index",setup(e){const a=C(),t=[{icon:"1"},{icon:"2"},{icon:"3"},{icon:"4"}],l=[{source:"微博",icon:"111",num:3,children:[{url:"1"},{url:"2"},{url:"3"}]},{source:"微信",icon:"000",num:1,children:[{url:"1"}]},{source:"qq",icon:"333",num:2,children:[{url:"1"},{url:"2"}]},{source:"抖音",icon:"222",num:3,children:[{url:"1"},{url:"2"},{url:"3"}]},{source:"其他",icon:"111",num:0,children:[]}],i=[{title:"1111",date:"2022-11-22",icon:"11111"},{title:"aaaaaaaaaaa",date:"2022-11-22",icon:"11111"},{title:"eeeeee",date:"2022-11-22"},{title:"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",date:"2022-11-22",icon:"11111"}],s=v(0),o=e=>a.push(e);return f((()=>{})),w((()=>{})),(e,a)=>{const r=ve,u=se,v=te,d=n,h=c,m=re;return D(),$("div",he,[_(" 公告 "),b(r,{"left-icon":"volume-o",text:"公告：仅为个人使用，请勿传播，任何传播造成的问题，将会依法追究相应法律责任。"}),_(" 轮播 "),b(v,{class:"home-swipe",autoplay:3e3,"indicator-color":"blue"},{default:S((()=>[(D(),$(z,null,M(t,(e=>b(u,{key:e.icon},{default:S((()=>[I("img",{class:"home-swipe-item-icon home-card",src:`@/assets/images/album/${e.icon}`,alt:""},null,8,me)])),_:2},1024))),64))])),_:1}),_(" 最新照片 "),I("div",fe,[I("div",pe,[ge,I("div",{class:"card-right",onClick:a[0]||(a[0]=e=>o("/album"))},[T("查看全部"),b(d,{name:"arrow"})])]),I("div",we,[(D(),$(z,null,M(l,((e,a)=>I("div",{key:e.source,onClick:e=>(e=>{s.value=e})(a),class:"home-album-tabs-item"},[b(h,{content:e.num,color:"rgb(126, 145, 243)"},{default:S((()=>[I("img",{class:P((a===s.value?"home-album-tabs-icon-hit":"")+" home-album-tabs-icon"),src:`@/assets/images/album/${e.icon}`,alt:""},null,10,ye)])),_:2},1032,["content","color"])],8,be))),64))]),I("div",xe,[l[s.value].children.length?(D(),$("div",ke,[(D(!0),$(z,null,M(l[s.value].children,(e=>(D(),$("img",{class:"home-album-list-icon",key:e.url,src:`@/assets/images/album/${e.url}`,alt:""},null,8,Ce)))),128))])):(D(),$("div",$e,[b(m,null,{default:S((()=>[T("暂无照片")])),_:1})]))])]),_(" 最新动态 "),I("div",_e,[I("div",Se,[Ie,I("div",{class:"card-right",onClick:a[1]||(a[1]=e=>o("/dynamic"))},[T("查看全部"),b(d,{name:"arrow"})])]),I("div",Te,[(D(),$(z,null,M(i,((e,a)=>I("div",{class:P((a?"list-item-division":"")+" home-dynamic-list-item"),key:e.title},[I("div",ze,[e.icon?(D(),$("span",Me,"图文:")):_("v-if",!0),I("span",Be,X(e.title),1)]),I("div",je,X(e.date),1)],2))),64))])])])}}}),[["__scopeId","data-v-2c5296db"],["__file","D:/代码仓库/王思雨/新建文件夹/wangsiyv/src/pages/home/index.vue"]]);export{De as default};
